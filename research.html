async function checkWallet() {
    if (window.solana && window.solana.isPhantom) {
        try {
            // Conecta com popup se necess√°rio
            const resp = await window.solana.connect({ onlyIfTrusted: false });

            const walletAddress = resp.publicKey.toString();
            status.textContent = `üîç Checking $ZOH balance for wallet: ${walletAddress}`;

            const connection = new solanaWeb3.Connection(
                solanaWeb3.clusterApiUrl("mainnet-beta"),
                "confirmed"
            );

            // Consulta os tokens da carteira
            const tokens = await connection.getParsedTokenAccountsByOwner(
                resp.publicKey,
                {
                    programId: new solanaWeb3.PublicKey(
                        "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"
                    )
                }
            );

            // Verifica se tem o token ZOH
            const hasZOH = tokens.value.some((account) => {
                const info = account.account.data.parsed.info;
                return (
                    info.mint === TOKEN_ADDRESS &&
                    parseFloat(info.tokenAmount.uiAmount) > 0
                );
            });

            if (hasZOH) {
                status.textContent = "‚úÖ Access granted. Welcome, ZOH holder!";
                researchContent.classList.remove("hidden");
                connectBtn.classList.add("hidden");
            } else {
                status.textContent = "‚õî You need to hold $ZOH tokens to access this page.";
                connectBtn.classList.remove("hidden");
            }

        } catch (err) {
            console.error("Erro ao conectar com Phantom:", err);
            status.textContent = "‚ùå Wallet connection failed. Please try again.";
            connectBtn.classList.remove("hidden");
        }
    } else {
        status.textContent = "‚ö†Ô∏è Phantom Wallet not detected. Please install it.";
        connectBtn.classList.remove("hidden");
    }
}

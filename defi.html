async function checkZOH(publicKey) {
  const connection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl("mainnet-beta"));
  const status = document.getElementById("status");

  try {
    const response = await connection.getTokenAccountsByOwner(
      new solanaWeb3.PublicKey(publicKey),
      {
        programId: new solanaWeb3.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),
      }
    );

    console.log("Tokens encontrados:", response.value.length);
    let hasZOH = false;

    for (let acc of response.value) {
      const data = acc.account.data;
      const decoded = solanaWeb3.AccountLayout.decode(data);
      const mint = new solanaWeb3.PublicKey(decoded.mint).toBase58();
      const amount = Number(decoded.amount);

      console.log(`Mint: ${mint} | Amount (raw): ${amount}`);

      if (mint === ZOH_MINT && amount > 0) {
        hasZOH = true;
        break;
      }
    }

    if (hasZOH) {
      status.innerText += " ✅ ZOH detectado!";
      document.getElementById("wallet-section").classList.remove("hidden");
    } else {
      status.innerText += " ❌ Você não possui ZOH.";
      alert("❌ Acesso negado. Você precisa possuir o token ZOH.");
    }
  } catch (error) {
    console.error("Erro ao buscar tokens:", error);
    alert("Erro ao verificar tokens.");
  }
}
